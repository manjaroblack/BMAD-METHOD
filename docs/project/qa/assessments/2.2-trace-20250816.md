# Requirements Traceability Matrix

## Story: 2.2 - Toolkit Service, Toolkit View, and CLI Bypass

### Coverage Summary

- Total Requirements (ACs considered): 4 (AC1–AC4)
- Fully Covered: 1 (AC3)
- Partially Covered: 2 (AC1, AC2)
- Not Covered: 1 (AC4)

### Requirement Mappings

#### AC1: Toolkit Service provides task discovery and execution

Coverage: PARTIAL

Given-When-Then mappings:
- Unit: `tests/services/toolkit_service_test.ts::listTasks returns tasks`
  - Given: a tasks config with entries
  - When: `listTasks()` is called
  - Then: returns normalized list with commands
- Unit: `tests/services/toolkit_service_test.ts::runTask uses deno task`
  - Given: a known task and pass-through args
  - When: `runTask(name, ['--', '--bar'])`
  - Then: invokes `deno task <name> -- --bar` and returns exit code
- Unit: `tests/services/toolkit_service_test.ts::runTask rejects unknown`
  - Given: a task name not in config
  - When: `runTask('build')`
  - Then: rejects with clear error message

Gap: No tests for malformed/empty `tasks` in discovery (suggested P2).

#### AC2: Toolkit Menu View lists tasks and runs selected

Coverage: PARTIAL

- Unit: `tests/tui/toolkit_menu_view_test.ts::empty state`
- Unit: `tests/tui/toolkit_menu_view_test.ts::lists tasks and runs selected`

Gap: No test for "Back" action (suggested P2).

#### AC3: CLI bypass to run toolkit tasks without launching the TUI

Coverage: FULL

- Unit: `tests/cli/toolkit_cli_test.ts::runs task with pass-through`
- Unit: `tests/cli/toolkit_cli_test.ts::unknown task exits 1`
- Unit: `tests/cli/toolkit_cli_test.ts::without pass-through does not add --`

#### AC4: Centralized dependencies

Coverage: NONE

- Recommendation: Add static check or lint rule test ensuring imports go through `deps.ts` (P2).

### Critical Gaps

1. Back action behavior untested (AC2) — Priority: P2
2. Dependency centralization enforcement untested (AC4) — Priority: P2

### Test Design Recommendations

- Add a UI interaction test covering the Back action from Toolkit Menu (P2).
- Add a static analysis/lint test to enforce centralized imports policy (P2).
